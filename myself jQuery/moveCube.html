<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>moveCube</title>
	<script src="./js/modernizr.js"></script>
	<link rel="stylesheet" href="./css/common.css">
</head>
<body>
	<style>
		.main{width:300px; height:300px; margin:30px auto; position:relative;}
		.cube{width:10px; height:10px; background:#f4423d; position:absolute; top:0; left:0;}
	</style>
	<div class="main">
		<div id="cube" class="cube"></div>
	</div>
	<script src="./js/common.js"></script>
	<script>
		function moveCubeSet(){
			if(!document.getElementById) return false;
			if(!document.getElementById('cube')) return false;
			var element = document.getElementById('cube'),
				key;
			element.style.left = 0;
			element.style.top = 0;
			element.foo = 0;
			key = setTimeout("moveCube('cube',"+300+","+0+","+10+")",0);
			key = setTimeout("moveCube('cube',"+300+","+300+","+10+")",600);
			key = setTimeout("moveCube('cube',"+0+","+300+","+10+")",1200);
			key = setTimeout("moveCube('cube',"+0+","+0+","+10+")",1800);
		}
		function moveCube(elementID,finalX,finalY,speed){
			var element = document.getElementById(elementID),
				posX = parseInt(element.style.left),
				posY = parseInt(element.style.top),
				dist;
			if(element.foo) clearTimeout(element.foo);
			if(posX == finalX && posY == finalY) return false;
			if(posX < finalX){
				dist = Math.ceil((finalX-posX)/10);
				posX += dist;
			}
			if(posX > finalX){
				dist = Math.ceil((posX-finalX)/10);
				posX -= dist;
			}
			if(posY < finalY){
				dist = Math.ceil((finalY-posY)/10);
				posY += dist;
			}
			if(posY > finalY){
				dist = Math.ceil((posY-finalY)/10);
				posY -= dist;
			}
			element.style.left = posX + 'px';
			element.style.top = posY + 'px';
			element.foo = setTimeout('moveCube("'+elementID+'",'+finalX+','+finalY+','+speed+')',speed);
		}
		addLoadEvent(moveCubeSet);
	</script>
</body>
</html>